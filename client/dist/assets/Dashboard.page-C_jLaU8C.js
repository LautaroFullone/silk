import{e as A,j as e}from"./data-DYEAm0ln.js";import{C as T,f as y,r as _,a as M}from"./formatRelativeTime-DHZu_Svc.js";import{c as h,q as D,F as p,M as v,s as b,r as d}from"./index-BM89eI16.js";import{q as $}from"./reactQueryKeys-DAqxpf92.js";import{S as i}from"./skeleton-CsXYvHL8.js";import{C as m,a as x,b as w,c as C,d as S}from"./card--9vtpjfM.js";import{e as E,r as j}from"./routing-DS5dkcPc.js";import{P as q}from"./PageTitle-4ciku_bp.js";import{C as P}from"./calendar-CZGbLJS8.js";import"./vendor-CCYiWZgt.js";import"./arrow-left-DodP1MxD.js";const F=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],I=h("arrow-right",F);const R=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]],L=h("file-plus-2",R);const z=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],O=h("history",z);const H=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],B=h("zap",H);async function W(){const{data:t}=await D.get("/dashboard/stats");return t}const G=()=>{const{data:t,isLoading:a,error:l,isError:o}=A({queryKey:[$.FETCH_DASHBOARD_STATS],queryFn:W,staleTime:3e5,refetchOnWindowFocus:!1});return{stats:t?.stats,isLoading:a,isError:o,error:l}},g=({activity:t})=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-full ${t.color}`,children:e.jsx(t.icon,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.action}),e.jsx("p",{className:"text-xs text-gray-500",children:t.time})]})]});g.Skeleton=function(){return e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(i,{className:"h-8 w-8 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsx(i,{className:"h-4 w-full max-w-xs"}),e.jsx(i,{className:"h-3 w-16"})]})]})};const N=({shortcut:t,onClick:a})=>e.jsx("div",{className:"w-full justify-start p-2 hover:bg-emerald-50 cursor-pointer rounded-md",onClick:a,children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-100",children:e.jsx(t.icon,{className:"w-4 h-4 text-emerald-700"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500",children:t.description})]}),e.jsx(I,{className:"w-4 h-4 text-gray-400"})]})});N.Skeleton=function(){return e.jsx("div",{className:"w-full justify-start p-2 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx(i,{className:"h-8 w-8 rounded-lg"}),e.jsxs("div",{className:"text-left flex-1 space-y-1",children:[e.jsx(i,{className:"h-4 w-24 "}),e.jsx(i,{className:"h-3 w-32 "})]}),e.jsx(i,{className:"size-4 "})]})})};const f=({title:t,value:a,description:l,icon:o,iconColor:u,iconBgColor:n})=>e.jsx(m,{className:"hover:shadow-md transition-shadow",children:e.jsxs(x,{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:a}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l})]}),e.jsx("div",{className:`p-3 rounded-full ${n}`,children:e.jsx(o,{className:`w-6 h-6 ${u}`})})]})]})});f.Skeleton=function(){return e.jsx(m,{children:e.jsxs(x,{children:[e.jsx(i,{className:"h-4 w-24 mb-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{className:"h-8 w-16 mb-2"}),e.jsx(i,{className:"h-4 w-20"})]}),e.jsx(i,{className:"h-12 w-12 rounded-full"})]})]})})};const ae=()=>{const t=E(),{stats:a,isLoading:l,isError:o}=G(),u=j.useMemo(()=>a?[{title:"Posts Publicados",value:a.posts.total,description:`${a.posts.active} activos`,icon:p,color:"text-sky-600",bgColor:"bg-sky-50"},{title:"Testimonios",value:a.testimonials.total,description:`${a.testimonials.highlighted} destacados`,icon:v,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Contrataciones",value:a.requests.byStatus.CONTRACTED,description:"Este mes",icon:T,color:"text-teal-600",bgColor:"bg-teal-50"},{title:"Solicitudes",value:a.requests.total,description:`${a.requests.byStatus.PENDING} pendientes`,icon:b,color:"text-rose-600",bgColor:"bg-rose-50"}]:[],[a]),n=j.useMemo(()=>{if(!a)return[];const r=[];return a.posts.recent.forEach(s=>{r.push({action:`Post "${s.title}" publicado`,time:y(s.date),type:"post",icon:p,color:"bg-sky-100 text-sky-700",sortDate:new Date(s.date)})}),a.requests.recent.forEach(s=>{const c=_[s.status];r.push({action:`Solicitud de ${s.name} - ${c.label}`,time:y(s.createdAt),type:"request",icon:c.icon,color:c.color,sortDate:new Date(s.createdAt)})}),r.sort((s,c)=>c.sortDate.getTime()-s.sortDate.getTime()).slice(0,6)},[a]),k=j.useMemo(()=>[{label:"Nuevo Post",icon:L,route:d.ADMIN_POST_NEW,description:"Publicar nuevo contenido"},{label:"Nuevo Testimonio",icon:v,route:d.ADMIN_TESTIMONIAL_NEW,description:"Agregar testimonio"},{label:"Listado de Posts",icon:p,route:d.ADMIN_POST_LIST,description:"Gestionar publicaciones"},{label:"Registro de Solicitudes",icon:b,route:d.ADMIN_REQUEST_LIST,description:"Revisar solicitudes"}],[]);return o?e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx(M,{className:"size-12 text-emerald-800"}),e.jsx("p",{className:"text-lg font-medium",children:"Error al cargar el dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Por favor, recarga la página"})]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Panel de Control",description:"Resumen de la plataforma"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l?e.jsx(e.Fragment,{children:Array.from({length:4}).map((r,s)=>e.jsx(f.Skeleton,{},`stat-skeleton-${s}`))}):u.map((r,s)=>e.jsx(f,{title:r.title,value:r.value,description:r.description,icon:r.icon,iconColor:r.color,iconBgColor:r.bgColor},`stat-card-${s}`))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[" ",e.jsxs(m,{className:"lg:col-span-2",children:[e.jsxs(w,{children:[e.jsx(C,{className:"flex items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"size-6 rounded"}),e.jsx(i,{className:"h-6 w-36"})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"size-5 text-emerald-800"}),"Actividad Reciente"]})}),e.jsx(S,{children:l?e.jsx(i,{className:"h-4 w-52 mt-2"}):"Últimas acciones en el panel"})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:l?Array.from({length:5}).map((r,s)=>e.jsx(g.Skeleton,{},`activity-skeleton-${s}`)):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("div",{className:"bg-gray-50 rounded-full p-3 w-16 h-16 mx-auto mb-4",children:e.jsx(P,{className:"w-10 h-10 mx-auto text-gray-300"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"No hay actividad reciente"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Las acciones aparecerán aquí cuando se realicen"})]}):n.map((r,s)=>e.jsx(g,{activity:r},`activity-card-${s}`))})})]}),e.jsxs(m,{className:"h-min",children:[e.jsxs(w,{children:[e.jsx(C,{className:"flex items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"size-6 rounded"}),e.jsx(i,{className:"h-6 w-40"})]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"size-5 text-emerald-800"}),"Acciones Rápidas"]})}),e.jsx(S,{children:l?e.jsx(i,{className:"h-4 w-28 mt-2"}):"Tareas frecuentes"})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:l?Array.from({length:4}).map((r,s)=>e.jsx(N.Skeleton,{},`action-skeleton-${s}`)):k.map((r,s)=>e.jsx(N,{shortcut:r,onClick:()=>t(r.route)},`shortcut-card-${s}`))})})]})]})]})};export{ae as default};
