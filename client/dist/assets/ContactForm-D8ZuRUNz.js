import{u as j,d as y,j as e}from"./data-DYEAm0ln.js";import{t as h}from"./index-Btd106Xw.js";import{C as E,a as S}from"./card-BcU0pFzW.js";import"./routing-DS5dkcPc.js";import{c as N,M as q,P as M}from"./requests.service-CyNOisKY.js";import{e as L}from"./extractErrorDetails-DKJ0Bd4I.js";import{q as v}from"./reactQueryKeys-DAqxpf92.js";import{A as k}from"./ActionButton-DzR36GRU.js";import{O as A,u as U,I as u}from"./InputForm-CbdPvAYo.js";import{L as z}from"./label-UeXQHYUk.js";import{S as F,a as R,b as I,c as $,d as f}from"./select-BdrtPeHB.js";import{U as T}from"./user-ZVh99WFc.js";import{C as w}from"./calendar-CfB7Un8h.js";import{M as P}from"./mail-D8O91UdH.js";const D=()=>{const l=j(),{mutateAsync:c,isPending:o}=y({mutationFn:N,onSuccess:({message:r})=>{h.success(r),l.invalidateQueries({queryKey:[v.FETCH_REQUESTS]})},onError:r=>{if(r?.message==="Network Error")return;const{message:d}=L(r);h.error(d,{id:`error-${v.CREATE_REQUEST}`})}});return{createServiceRequestMutate:c,isPending:o}},b=({name:l,label:c,value:o,onChange:r,options:d,placeholder:g="Seleccioná una opción",errors:t={},className:x="",labelClassName:n="",register:m})=>{const s=l.split(".").reduce((a,C)=>a?.[C],t),p=!!s,i=a=>{m?m.onChange({target:{name:m.name,value:a},type:"change"}):r&&r(a)};return e.jsxs("div",{children:[e.jsx(z,{htmlFor:l,className:`mb-2 ${n}`,children:c}),e.jsxs(F,{value:o||"",onValueChange:i,name:m?.name||l,children:[e.jsx(R,{id:`select-${l}`,className:`w-full shadow-xs ${p?"border-red-500 focus:ring-red-500":""} ${x}`,children:e.jsx(I,{placeholder:g})}),e.jsx($,{children:d.map(a=>typeof a=="string"?e.jsx(f,{value:a,children:a},a):e.jsx(f,{value:a.value,children:a.label},a.value))})]}),p&&e.jsxs("p",{className:"mt-1 text-xs text-red-500 flex items-top gap-1",children:[e.jsx(A,{size:13}),s.message]})]})},Q={name:"",phone:"",service:void 0,budget:void 0,age:void 0,email:"",ubication:"",startMoment:void 0},se=({title:l="Comenzá tu transformación",subTitle:c="Completá tus datos",isServiceInputEnabled:o=!1,onSubmitSuccess:r})=>{const{createServiceRequestMutate:d,isPending:g}=D(),{register:t,reset:x,watch:n,handleSubmit:m,formState:{errors:s}}=U({mode:"onSubmit",reValidateMode:"onChange",defaultValues:Q}),p=async i=>{const a={...i,service:(o?i.service:"Colorimetría")||"",budget:i.budget||"",age:i.age||0,startMoment:i.startMoment||""};await d(a),x(),r&&r()};return e.jsx(E,{className:"shadow-sm rounded-xl",children:e.jsx(S,{className:"h-full",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-silk-primary",children:l})}),e.jsx("p",{className:"text-center text-xs tracking-wide text-silk-primary/80 uppercase",children:c}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 items-start",children:[e.jsx(u,{type:"text",name:"name",label:"Nombre Completo",labelClassName:"text-silk-primary",placeholder:"Ingresá tu nombre",register:t("name",{required:"El nombre es obligatorio",maxLength:{value:50,message:"El nombre no puede superar los 50 caracteres"},pattern:{value:/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,message:"El nombre solo puede contener letras y espacios"}}),errors:s,icon:T}),e.jsx(u,{type:"number",name:"age",label:"Edad",value:n("age")||"",labelClassName:"text-silk-primary",placeholder:"Ingresá tu edad",register:t("age",{required:"La edad es obligatoria",valueAsNumber:!0,min:{value:13,message:"La edad mínima es 13 años"},max:{value:120,message:"La edad máxima es 120 años"}}),errors:s,icon:w})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 items-start",children:[e.jsx(u,{type:"text",name:"ubication",label:"Ubicación",labelClassName:"text-silk-primary",placeholder:"Ingresá tu ubicación",register:t("ubication",{required:"La ubicación es obligatoria",maxLength:{value:100,message:"La ubicación no puede superar los 100 caracteres"}}),errors:s,icon:q}),e.jsx(u,{type:"tel",name:"phone",label:"Teléfono",labelClassName:"text-silk-primary",placeholder:"Ingresá tu teléfono",register:t("phone",{required:"El teléfono es obligatorio",pattern:{value:/^[\d\s\-+()]+$/,message:"El teléfono solo puede contener números, espacios, guiones, paréntesis y el signo +"},minLength:{value:8,message:"El teléfono debe tener al menos 8 caracteres"},maxLength:{value:20,message:"El teléfono no puede superar los 20 caracteres"}}),errors:s,disabled:!1,icon:M})]}),e.jsx(u,{type:"email",name:"email",label:"Email",labelClassName:"text-silk-primary",placeholder:"Ingresá tu email",register:t("email",{required:"El email es obligatorio",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"El email no tiene un formato válido"},maxLength:{value:100,message:"El email no puede superar los 100 caracteres"}}),errors:s,icon:P}),o&&e.jsx(b,{name:"service",label:"¿Que tipo de servicio estas buscando?",labelClassName:"text-silk-primary",placeholder:"Seleccioná un servicio",value:n("service"),register:t("service",{required:"El servicio es obligatorio"}),options:["Personal Shopper & Closet Detox","Transfomá tu imagen"],errors:s}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 items-end",children:[e.jsx(b,{name:"budget",label:"¿Cual es tu presupuesto para ropa y accesorios?",labelClassName:"text-silk-primary",placeholder:"Seleccioná tu presupuesto",value:n("budget"),register:t("budget",{required:"El presupuesto es obligatorio"}),errors:s,options:["Hasta 100 USD","Entre 100 y 250 USD","Entre 250 y 500 USD","Entre 500 y 1000 USD","Más de 1000 USD"]}),e.jsx(b,{name:"startMoment",label:"¿Cuándo te gustaría empezar?",labelClassName:"text-silk-primary",placeholder:"Seleccioná cuándo empezar",value:n("startMoment"),register:t("startMoment",{required:"El momento de inicio es obligatorio"}),errors:s,options:["Inmediatamente","El próximo mes","A convenir"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{onClick:m(p),variant:"primary",size:"lg",label:"Enviar",loadingLabel:"Enviando...",isLoading:g})})]})]})})})};export{se as C};
