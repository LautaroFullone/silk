generator client {
   provider = "prisma-client-js"
}

datasource db {
   provider  = "postgresql"
   url       = env("DATABASE_URL")
   directUrl = env("DIRECT_URL")
}

model Testimonial {
   id          String  @id @default(cuid())
   personName  String
   personRole  String
   description String
   isHighlight Boolean
   isActive    Boolean

   avatarImagePath String?

   createdAt DateTime @default(now())
}

model Post {
   id            String  @id @default(cuid())
   title         String
   author        String
   date          String
   description   String
   content       Json
   isActive      Boolean
   imageFilePath String?
   categoryId    String

   createdAt DateTime @default(now())

   category PostCategory @relation(fields: [categoryId], references: [id])

   @@index([categoryId])
}

model PostCategory {
   id   String @id @default(cuid())
   name String @unique @db.Citext

   posts Post[]
}

model ServiceRequest {
   id          String @id @default(cuid())
   name        String
   email       String
   age         Int
   ubication   String
   phone       String
   service     String
   budget      String
   startMoment String
   timeline    Json   @default("[]") // Array de eventos del timeline

   status RequestStatus @default(PENDING)

   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
}

enum RequestStatus {
   PENDING
   CONTACTED
   CONTRACTED
   CANCELLED
}
